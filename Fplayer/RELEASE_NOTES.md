# Fplayer v2.6.0 发布说明

## 🎉 新功能

### 物理系统全面改进
- ✅ **基于Terraria原版物理逻辑** - 完全重构的物理系统
- ✅ **精确地面检测** - 基于Terraria原版FloorVisuals逻辑
- ✅ **完整墙壁碰撞** - 防止假人穿过墙壁的完整碰撞检测
- ✅ **正确跳跃状态** - 修复跳跃状态管理，解决空中状态问题
- ✅ **防止陷入土里** - 改进的碰撞检测逻辑，确保玩家不会穿过地面

### 地面检测改进
- ✅ **多点检测** - 检查玩家宽度范围内的所有方块
- ✅ **精确计算** - 基于Terraria原版的地面高度计算
- ✅ **状态同步** - 地面状态与跳跃状态正确同步

### 墙壁碰撞检测
- ✅ **完整碰撞箱** - 检查玩家碰撞箱的所有边界
- ✅ **方向检测** - 分别检测水平和垂直移动的碰撞
- ✅ **防止穿墙** - 阻止假人穿过墙壁

## 🔧 技术改进

### 物理引擎重构
- 基于Terraria原版的DryCollision方法
- 基于Terraria原版的FloorVisuals逻辑
- 优化的碰撞检测算法
- 改进的状态管理机制

### 性能优化
- 高效的碰撞检测算法
- 减少不必要的计算
- 改进的内存使用

## 🐛 修复问题

- 修复假人容易陷入土里的问题
- 修复行走时容易陷入土里的问题
- 修复跳跃因为一直显示空中状态而无法跳跃的问题
- 修复静止不动时一直为空中状态的问题
- 修复前面有方块但还是照样往前走的问题

## 📋 使用说明

### 物理系统
- 假人现在会正确检测地面，不会陷入土里
- 假人不会穿过墙壁，会正确停止
- 跳跃状态正确，只有在地面上时才能跳跃
- 地面状态检测准确，静止时正确显示地面状态

## 🔄 兼容性

- ✅ TShock 5.1+
- ✅ Terraria 1.4.4.9
- ✅ .NET 6.0+

## 📦 安装

1. 下载 `Fplayer-Plugin-v2.6.0.zip`
2. 解压到TShock的ServerPlugins文件夹
3. 重启服务器
4. 使用 `/dummy` 命令管理假人

## 🎯 下一步计划

- [ ] 更多环境支持
- [ ] 高级AI行为
- [ ] 多人协作功能
- [ ] 更多特殊移动

---

**版本**: v2.6.0  
**发布日期**: 2024年  
**开发者**: Fplayer Team

---

# Fplayer v2.5.0 发布说明

## 🎉 新功能

### 水平移动系统
- ✅ **原版移动逻辑** - 基于Terraria原版的HorizontalMovement方法
- ✅ **平滑加速** - 假人逐渐加速到最大速度
- ✅ **自然减速** - 停止移动时自然减速
- ✅ **速度限制** - 不会超过最大速度
- ✅ **朝向更新** - 移动方向正确更新

### 装备系统
- ✅ **赫尔墨斯靴子** - 增加1点最大速度
- ✅ **幽灵靴子** - 增加1点最大速度
- ✅ **闪电靴子** - 增加2点最大速度和0.1加速
- ✅ **霜花靴子** - 增加2.5点最大速度和0.15加速
- ✅ **大地火花靴子** - 增加3点最大速度和0.2加速
- ✅ **翅膀** - 增加0.5点最大速度
- ✅ **火箭靴** - 增加0.3点最大速度
- ✅ **喷气背包** - 增加0.8点最大速度

### 滑轮系统
- ✅ **滑轮检测** - 假人现在可以自动检测附近的绳子
- ✅ **便携式凳子** - 支持通过命令控制凳子状态
- ✅ **多位置支持** - 支持左、中、右三个滑轮位置
- ✅ **平滑移动** - 在绳子上移动时速度适中（2.5f）
- ✅ **碰撞检测** - 自动避免与方块碰撞

### 跳跃系统改进
- ✅ **原版跳跃逻辑** - 基于Terraria原版的跳跃高度和速度计算
- ✅ **动态跳跃高度** - 根据装备和状态调整跳跃能力
- ✅ **跳跃持续时间** - 精确控制跳跃时间（0.3秒）

### 物理系统优化
- ✅ **改进地面检测** - 动态计算地面高度，防止掉入地下
- ✅ **重力系统** - 更自然的重力效果
- ✅ **碰撞处理** - 改进的边界检查和碰撞检测

## 🔧 技术改进

### 命令系统
- 新增 `/dummy stool [name] [on|off]` - 控制便携式凳子
- 新增 `/dummy pulley [name]` - 查看滑轮状态
- 改进命令参数解析

### 物理引擎
- 集成Terraria原版物理逻辑
- 优化移动和跳跃计算
- 改进位置同步机制

## 🐛 修复问题

- 修复假人创建时的坐标问题
- 修复命令参数解析错误
- 修复地面检测不准确的问题
- 修复跳跃后卡住的问题

## 📋 使用说明

### 滑轮系统使用
1. 创建假人：`/dummy create MyDummy`
2. 启用凳子：`/dummy stool MyDummy on`
3. 开始移动：`/dummy startmove MyDummy left`
4. 检查状态：`/dummy pulley MyDummy`

### 跳跃系统
- 使用 `/dummy jump [name]` 让假人跳跃
- 跳跃高度和速度基于Terraria原版逻辑
- 支持装备和状态影响

## 🔄 兼容性

- ✅ TShock 5.1+
- ✅ Terraria 1.4.4.9
- ✅ .NET 6.0+

## 📦 安装

1. 下载 `Fplayer-Plugin-v2.5.0.zip`
2. 解压到TShock的ServerPlugins文件夹
3. 重启服务器
4. 使用 `/dummy` 命令管理假人

## 🎯 下一步计划

- [ ] 水平移动系统集成
- [ ] 更多装备支持
- [ ] 高级AI行为
- [ ] 多人协作功能

## v2.4.0 - 重力碰撞系统优化 (2024-12-19)

### 新增功能
- **重力系统优化** - 基于Terraria原版player2.cs的精确重力实现
  - 支持水、蜂蜜、翅膀等环境重力影响
  - 动态重力参数调整
  - 环境状态自动检测

- **碰撞系统优化** - 基于Terraria原版player.cs的完整碰撞检测
  - 干燥环境碰撞 (DryCollision)
  - 水中碰撞 (WaterCollision) 
  - 蜂蜜碰撞 (HoneyCollision)
  - 斜坡碰撞处理
  - 台阶碰撞处理
  - 高速移动碰撞优化

- **特殊移动系统** - 基于Terraria原版player1.cs的特殊移动
  - 墙壁滑行 (WallslideMovement)
  - 地毯移动 (CarpetMovement)
  - 下落状态管理
  - 装备影响系统

### 新增命令
- `/dummy gravity <假人名称>` - 查看重力状态
- `/dummy collision <假人名称>` - 查看碰撞状态  
- `/dummy special <假人名称>` - 查看特殊移动状态

### 技术改进
- 环境自适应物理系统
- 精确的碰撞检测算法
- 智能的状态管理
- 优化的性能表现

### 兼容性
- 保持与现有跳跃系统、滑轮系统、水平移动系统的完全兼容
- 支持所有现有命令和功能
- 向后兼容v2.3.0的所有功能

## v2.3.0 - 水平移动系统 (2024-12-18)

---

**版本**: v2.5.0  
**发布日期**: 2024年  
**开发者**: Fplayer Team 